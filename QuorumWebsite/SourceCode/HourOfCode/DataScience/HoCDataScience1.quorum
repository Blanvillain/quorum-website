use Libraries.Web.Page.Division
use Libraries.Web.Page.CodeBlock
use Libraries.Web.Page.Paragraph
use Libraries.Web.Page.Image
use Libraries.Web.Page.WebTable
use Libraries.Web.Page.TableBody
use Libraries.Containers.Array
use Libraries.Web.Page.TableHeader


class HoCDataScience1 is HourOfCodeDataScience
    integer ACTIVITY = 1
    text SUBTITLE = "Displaying a Chart"

    action Setup()
        Setup(ACTIVITY, SUBTITLE, GetIntro(), GetInstructions(), GetIDE())
    end

    action GetIntro() returns Division
        text dq = ""
        dq = dq:GetDoubleQuote()
        Division intro
        Preformatter pre

        // tracking pixel for code.org
        //intro:AddImage("https://code.org/api/hour/begin_quorum_astronomy.png", "")
        intro:AddParagraph("")
//        intro:AddParagraph("When data is cleaned and ready to be presented, scientists show their data to others. When scientists do this, it is rare that they just hand a community or person a data set. Looking at the raw data can be difficult for many reasons (e.g., it is huge, it is difficult to understand). Thus, we often use charts to represent summaries of the information in our data.")
//        intro:AddParagraph("Consider an example. We will take this example from a subset of the palmerpenguins dataset which contains real data collected by the Palmer Station Long Term Ecological Research Program as part of the US Long Term Ecological Research Network. This data contains attributes about individual penguins. Some of the attributes describe the species of penguin and which island it lives on, and others describe measurements, such as bill length, bill depth and flipper length.Suppose we want to create a visualization about the flipper length of penguins based on their bill length from shortest to longest by creating a scatter plot. While there might be many points, we would see that the points of the left side of the chart are closer to the bottom and as the points move to the right they get higher up from the bottom. What this suggests is that penguins' with longer flippers also had longer bills. As data scientists, we might want to inspect this further by breaking our data up into more groups. Data to make these predictions and analyses would be far more difficult to see with just a data table.")
        intro:AddParagraph("Welcome to our Data Science Hour of Code! Today we are going to use data visualization to explore trends in a dataset. A dataset is typically a large set of numbers and, at a first glance, would be presented in a table or spreadsheet. For example, below we have a few sample rows and columns from a file called Penguins1.csv [FOOTNOTE CITING PALMER PENGUINS?]")
        intro:AddParagraph("")
        //CodeBlock cb1
        //cb1:AddText("output " + dq + "telescope" + dq + "")
        //intro:Add(pre:GeneratePreformattedCode(cb1))

        //intro:AddParagraph("in the online code window below and then select the green Run Program button below the editor on the right (second in the tab order).")

        WebTable table = AddWebTable("Sample of Penguins1.CSV file")
        TableBody tableBody = AddTableBody()
        
        Array<text> tableHeaderArray
        //tableHeaderArray:Add("species") 
        //tableHeaderArray:Add("island")
        tableHeaderArray:Add("bill_length_mm") 
        //tableHeaderArray:Add("bill_depth_mm")
        tableHeaderArray:Add("flipper_length_mm")
        //tableHeaderArray:Add("body_mass_g")
        //tableHeaderArray:Add("sex")
        //tableHeaderArray:Add("year")

        TableHeader thead = AddTableHeaderRow(tableHeaderArray)
        table:Add(thead)  

        Array<text> penguinData1
        //penguinData1:Add("Adelie")
        //penguinData1:Add("Torgersen")
        penguinData1:Add("39.1") 
        //penguinData1:Add("18.7") 
        penguinData1:Add("181")
        //penguinData1:Add("3750")
        //penguinData1:Add("male")
        //penguinData1:Add("2007")
        tableBody:Add(AddTableBodyRow(penguinData1))

        Array<text> penguinData2
        //penguinData2:Add("Adelie")
        //penguinData2:Add("Biscoe") 
        penguinData2:Add("37.8") 
        //penguinData2:Add("18.3") 
        penguinData2:Add("174")
        //penguinData2:Add("3400")
        //penguinData2:Add("female")
        //penguinData2:Add("2007")
        tableBody:Add(AddTableBodyRow(penguinData2))

        Array<text> penguinData3
        //penguinData3:Add("Adelie")
        //penguinData3:Add("Dream") 
        penguinData3:Add("36.8") 
        //penguinData3:Add("18.5") 
        penguinData3:Add("193")
        //penguinData3:Add("3500")
        //penguinData3:Add("female")
        //penguinData3:Add("2009")
        tableBody:Add(AddTableBodyRow(penguinData3))

        Array<text> penguinData4
        //penguinData4:Add("Gentoo")
        //penguinData4:Add("Biscoe") 
        penguinData4:Add("46.1") 
        //penguinData4:Add("13.2") 
        penguinData4:Add("211")
        //penguinData4:Add("4500")
        //penguinData4:Add("female")
        //penguinData4:Add("2007")
        tableBody:Add(AddTableBodyRow(penguinData4))

        Array<text> penguinData5
        //penguinData5:Add("Chinstrap")
        //penguinData5:Add("Dream") 
        penguinData5:Add("46.5") 
        //penguinData5:Add("17.9") 
        penguinData5:Add("192")
        //penguinData5:Add("3500")
        //penguinData5:Add("female")
        //penguinData5:Add("2007")
        tableBody:Add(AddTableBodyRow(penguinData5))
    
        table:Add(tableBody)
        intro:Add(table)

        return intro

    end

    action GetInstructions() returns Division
        Division instructions
        
        instructions:AddParagraph("")
        instructions:AddParagraph("In the code editor below, we have a program that reads in this file to a DataFrame and makes a Chart. Add code blocks from the palette to the bottom of the program. <b>Display the Chart</b>.")
        instructions:AddParagraph("")

        return instructions
    end

    action GetIDE() returns IDE
        CodeForIDE code
        code:AddFileUrl("Main.quorum", "html/hourofcode/datascience/datascience1.quorum")
        IDE ide = AddIDE()
        ide:SetLightTheme()
        ide:SetCodeForIDE(code:GetJsonArray())
        ide:SetIdeTitle("Type your code below...")
        
        return ide
    end

    action GetLocation returns text
        return "hourofcode/datascience" + ACTIVITY + ".html"
    end

    action GetLinkName returns text
        return "Part " + ACTIVITY + ": " + SUBTITLE
    end

    action GetSectionName returns text
        return "Data Science"
    end

    action GetName returns text
        return "Part " + ACTIVITY + ": " + SUBTITLE
    end

    action GetShortDescription returns text
        return "how to display a Chart."
    end
end
