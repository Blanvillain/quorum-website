use Libraries.Web.Page.Division
use Libraries.Web.Page.CodeBlock
use Libraries.Web.Page.Paragraph
use Libraries.Web.Page.Image
use Libraries.Web.Page.WebTable
use Libraries.Web.Page.TableBody
use Libraries.Containers.Array
use Libraries.Web.Page.TableHeader


class HoCDataScience1 is HourOfCodeDataScience
    integer ACTIVITY = 1
    text SUBTITLE = "Displaying a Chart"

    action Setup()
        // set values for the block ide on this page
        SetPaletteFileName("palette/dataScience1.xml")
        SetCodeForBlocks("html/hourofcode/datascience/datascience1.quorum")
        Setup(ACTIVITY, SUBTITLE, GetIntro(), GetInstructions(), GetBlockIDE())
    end

    action GetIntro() returns Division
        text dq = ""
        dq = dq:GetDoubleQuote()
        Division intro
        Preformatter pre

        // tracking pixel for code.org
        //intro:AddImage("https://code.org/api/hour/begin_quorum_astronomy.png", "")

        intro:AddParagraph("")
        intro:AddParagraph("Welcome to our Data Science Hour of Code! Today we are going to use charts to explore data and answer some questions. A dataset is typically a large set of numbers or values. Typically, these would be be presented in a table or spreadsheet. For example, below we have a few sample rows and columns from a file called Penguins1.csv [FOOTNOTE CITING PALMER PENGUINS?]. When you only have a few rows of data, you might find it easy to look at those and find some information, but as you get more and more data, it gets difficult. Instead, we want to represent our data in a chart and make it 1) easy to read and 2) answer some questions.")
        intro:AddParagraph("In each activity, we're going to have some <i>Instructions</i> about what we're going to do with our code to change the chart, and throughout all our activities we're going to think about some <i>Objectives</i>. At the beginning, we might not be able to answer the questions in the <i>Objectives</i>, but take some time to think about and what we would need to change to answer them. We're going to start by making a Scatter Plot from our data.")
        intro:AddParagraph("")
        
        WebTable table = AddWebTable("Sample of Penguins1.CSV file")
        TableBody tableBody = AddTableBody()
        
        Array<text> tableHeaderArray
        tableHeaderArray:Add("bill_depth")
        tableHeaderArray:Add("bill_length")

        TableHeader thead = AddTableHeaderRow(tableHeaderArray)
        table:Add(thead)  

        Array<text> penguinData1
        penguinData1:Add("18.7") 
        penguinData1:Add("39.1") 
        tableBody:Add(AddTableBodyRow(penguinData1))

        Array<text> penguinData2
        penguinData2:Add("18.3") 
        penguinData2:Add("37.8") 
        tableBody:Add(AddTableBodyRow(penguinData2))

        Array<text> penguinData3
        penguinData3:Add("18.5") 
        penguinData3:Add("36.8") 
        tableBody:Add(AddTableBodyRow(penguinData3))

        Array<text> penguinData4
        penguinData4:Add("13.2") 
        penguinData4:Add("46.1") 
        tableBody:Add(AddTableBodyRow(penguinData4))

        Array<text> penguinData5
        penguinData5:Add("17.9") 
        penguinData5:Add("46.5") 
        tableBody:Add(AddTableBodyRow(penguinData5))
    
        table:Add(tableBody)
        intro:Add(table)

        return intro

    end

    action GetInstructions() returns Division
        Division instructions
        
        instructions:AddParagraph("")
        instructions:AddParagraph("In the code editor below, we have a program that reads in this file to a DataFrame and makes a Chart. Take code blocks from the palette and place them at the bottom of the program.")
        instructions:AddParagraph("<b>Display the Chart.</b>")
        instructions:AddParagraph("")

        return instructions
    end

//    action GetIDE() returns BlockIDE
//
//        CodeForIDE code
//        code:AddFileUrl("Main.quorum", "html/hourofcode/datascience/datascience1.quorum")
//        BlockIDE ide
//        //ide:SetLightTheme()
//        ide:SetNoCanvasMode(true)
//        ide:SetCodeForIDE(code:GetJsonArray())
//        ide:SetPaletteFile("palette/testPalette.xml")
//        //ide:SetIdeTitle("Type your code below...")
//        ide:Setup(me)
//        
//        return ide
//    end

    action GetLocation returns text
        return "hourofcode/datascience" + ACTIVITY + ".html"
    end

    action GetLinkName returns text
        return SUBTITLE
    end

    action GetSectionName returns text
        return "Data Science"
    end

    action GetName returns text
        return SUBTITLE
    end

    action GetShortDescription returns text
        return "how to display a Chart."
    end
end
